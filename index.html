<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>توقعات الطقس</title>
  <style>
    body{font-family:Arial;background:#f0f8ff;text-align:center;padding:20px;}
    .box{max-width:600px;margin:auto;background:#fff;padding:20px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.1);}
    button{background:#4caf50;color:#fff;padding:12px 24px;border:none;border-radius:6px;font-size:1.1rem;cursor:pointer;}
    .result{margin-top:20px;line-height:1.6;}
  </style>
</head>
<body>
  <div class="box">
    <h1>توقعات الطقس</h1>
    <button id="getBtn">عرض توقعات 7 أيام</button>
    <div id="output"></div>
  </div>

  <script>
    const API_URL = "https://web-production-b2f0.up.railway.app/api/weather";
    document.getElementById("getBtn").onclick = async () => {
      const out = document.getElementById("output");
      out.innerHTML = "<p>جاري التحميل... (أول مرة: 15-30 ثانية)</p>";
      try {
        const res = await fetch(API_URL, {
          method: "POST",
          headers: {"Content-Type": "application/json"},
          body: JSON.stringify({days: 7})
        });
        const data = await res.json();
        if (data.error) throw new Error(data.error);
        let html = `<h3>المدينة: ${data.city}</h3>`;
        data.results.forEach(r => {
          html += `<p><strong>${r.date}</strong>: ${r.temp}°C — ${r.outfit}</p>`;
        });
        out.innerHTML = html;
      } catch (e) {
        out.innerHTML = `<p style="color:red;">خطأ: ${e.message}</p>`;
      }
    };
  </script>
</body>
</html>
